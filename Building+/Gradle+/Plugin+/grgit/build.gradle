import java.time.Instant

plugins {
    id "org.ajoberstar.grgit" version "4.1.0"
}

task cloneSomeRepo {
    doLast {
        def grgit = org.ajoberstar.grgit.Grgit.clone(dir: "$buildDir/my-repo", uri: "https://github.com/ajoberstar/grgit.git")
        println grgit.describe()
    }
}

task addTagToCurrentRepo {
    doLast {
        def tag = "tag_${Instant.now().getEpochSecond()}" as String
        println "Adding tag: '$tag'"
        grgit.tag.add {
            name = tag
            message = "Release of $tag"
        }
        println grgit.describe()
    }
}
