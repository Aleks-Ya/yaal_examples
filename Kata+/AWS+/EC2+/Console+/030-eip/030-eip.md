# 030-eip

## Task
Run an web-server in an EC2 Instance.
Use an Elastic IP address to access the server from the Internet.

## Setup
1. Create a VPC
    1. Resources to create: `VPC only`
    2. Name: `kata-vpc-eip`
    3. IPv4 CIDR block: `IPv4 CIDR manual input`
    4. IPv4 CIDR: `10.0.0.0/28`
    5. IPv6 CIDR block: `No IPv6 CIDR block`
    6. Tenancy: `Default`
2. Create a Subnet
    1. VPC ID: `kata-vpc-eip`
    2. Name: `kata-subnet-eip`
    3. Availability Zone: `No preference`
    4. IPv4 VPC CIDR block: `10.0.0.0/28`
    5. IPv4 subnet CIDR block: `10.0.0.0/28`
3. Create an Internet Gateway
	1. Name tag: `kata-igw-eip`
	2. Attach to VPC: `kata-vpc-eip`
4. Configure VPC
    1. Main route table
        1. Add route
            1. Destination: `0.0.0.0/0`
            2. Target: Internet Gateway `kata-igw-eip`
5. Create an EC2 instance
    1. Name: `kata-i-eip`
    2. Key pair name: `Proceed without a keypair`
    3. Network settings
        1. VPC: `kata-vpc-eip`
        2. Subnet: `kata-subnet-eip`
        3. Auto-assign public IP: `Disabled`
        4. Firewall (security groups): `Create security group`
            1. Security group name: `kata-sg-eip`
            2. Description: {generated}
            3. Inbound Security Group Rules
            	1. SSH
                	1. Type: `ssh`
                	2. Source type: `Anywhere`
                 1. HTTP
                    1. Type: `HTTP`
                    2. Source type: `Anywhere`
    6. User data:
        ```bash
        #!/bin/bash
        echo "Hello from EC2 instance!" > index.html
        python3 -m http.server 80 &
        ```
6. Create an Elastic IP
	1. Create an EIP
	2. Associate the EIP with the Instance:
7. Test with EIP: `curl http://35.153.246.102`

## Clean
1. Terminate instance
2. Delete VPC
