# 030-lvm

## Task
Create a Partition using LVM.

## Setup
1. Create a virtual file system
	1. Allocate a file: `fallocate -l 100M /tmp/lvm.img`
	2. Associate the file with a Loop Device: `sudo losetup --find --show /tmp/lvm.img`
	3. Remember the device: e.g. `/dev/loop19`
	4. Verify new device: `lsblk /dev/loop19`
2. Create a physical volume: `sudo pvcreate /dev/loop19`
3. Create a volume group: `sudo vgcreate myvg /dev/loop19`
4. Create a logical volume: `sudo lvcreate -L 50M -n mylv myvg`
5. Format the logical volume: `sudo mkfs.ext4 /dev/myvg/mylv`
6. Mount the logical volume:
	1. Create a mount point: `sudo mkdir /mnt/lvm`
	2. Mount: `sudo mount /dev/myvg/mylv /mnt/lvm`
7. Use the partition
	1. Create a file: `sudo su -c "echo abc > /mnt/lvm/data.txt"`
	2. Read the file: `cat /mnt/lvm/data.txt`
8. Review in GParted: `sudo gparted /dev/loop19`

## Cleanup
1. Unmount the partition: `sudo umount /mnt/lvm`
2. Delete the mount point: `sudo rm -rf /mnt/lvm`
3. Detach the loop device: `sudo losetup -d /dev/loop19`
4. Delete the file: `rm /tmp/lvm.img`

## History
- 2025-10-25 success
